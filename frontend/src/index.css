/* ==============================================
   RESET BÁSICO E DEFINIÇÕES GLOBAIS
   ============================================== */
:root {
  --background-dark: #0d1117;
  --surface-dark-1: #161b22;
  --surface-dark-2: #21262d;
  --primary-blue: #2f81f7;
  --seller-bubble: #005c4b;
  --client-bubble: #202c33;
  --text-light: #e6edf3;
  --text-secondary: #7d8590;
  --border-color: #30363d;
  --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  --error-red: #f85149;
  --copilot-surface: #0b141a;
}

*, *::before, *::after {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: var(--font-family);
  background-color: var(--background-dark);
  color: var(--text-light);
  overflow: hidden; /* Impede a rolagem da página inteira */
}


/* ==============================================
   ESTRUTURA PRINCIPAL DO APP (LAYOUT DE 3 COLUNAS)
   ============================================== */
.app-container {
  display: flex;
  height: 100vh;
  width: 100vw;
}

/* Coluna 1: Lista de Conversas (20%) */
.conversation-list-panel {
  width: 20%;
  border-right: 1px solid var(--border-color);
  display: flex;
  flex-direction: column;
  height: 100%;
  background-color: var(--surface-dark-1);
}

/* Coluna 2: Chat Ativo (50%) */
.chat-panel {
  width: 50%;
  border-right: 1px solid var(--border-color);
  display: flex;
  flex-direction: column;
  height: 100%;
background-color: #0b141a;
  background-image: url('https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png');
  background-repeat: repeat;
  background-size: auto;
  opacity: 0.9; /* Deixa a imagem um pouco mais sutil */
}

/* Coluna 3: Copiloto (30%) */
.copilot-panel {
  width: 30%;
  display: flex;
  flex-direction: column;
  height: 100%;
  padding: 1.5rem 2rem;
  overflow-y: auto;
  background-color: var(--copilot-surface);
}


/* ==============================================
   COMPONENTES DA LISTA DE CONVERSAS (COLUNA 1)
   ============================================== */
.conversation-list { overflow-y: auto; flex-grow: 1; }
.conversation-item { display: flex; align-items: center; padding: 0.75rem 1rem; cursor: pointer; transition: background-color 0.2s; position: relative; }
.conversation-item:hover { background-color: var(--surface-dark-2); }
.conversation-item.active { background-color: #2a3942; }
.avatar { width: 50px; height: 50px; border-radius: 50%; margin-right: 1rem; }
.conversation-details { flex-grow: 1; overflow: hidden; }
.conversation-header { display: flex; justify-content: space-between; align-items: center; }
.conversation-name { font-weight: 600; color: var(--text-light); }
.conversation-timestamp { font-size: 0.75rem; color: var(--text-secondary); }
.last-message { font-size: 0.9rem; color: var(--text-secondary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

.unread-dot {
  position: absolute;
  right: 1rem;
  top: 50%;
  transform: translateY(-50%);
  width: 10px;
  height: 10px;
  background-color: var(--primary-blue);
  border-radius: 50%;
  box-shadow: 0 0 5px var(--primary-blue);
}


/* ==============================================
   COMPONENTES DO CHAT ATIVO (COLUNA 2)
   ============================================== */
.chat-header-active {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.6rem 1rem;
  background-color: var(--surface-dark-1);
  border-bottom: 1px solid var(--border-color);
  flex-shrink: 0;
}
.header-avatar { width: 40px; height: 40px; border-radius: 50%; }
.header-name { font-weight: 600; flex-grow: 1; }
.header-actions button { background: none; border: none; color: var(--text-secondary); cursor: pointer; padding: 0.5rem; }

.chat-history-active {
  flex-grow: 1;
  overflow-y: auto;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.message-bubble-wrapper { display: flex; }
.message-bubble-wrapper.cliente { justify-content: flex-start; }
.message-bubble-wrapper.vendedor { justify-content: flex-end; }
.message-bubble-wrapper.system { justify-content: center; }

.message-bubble {
  padding: 0.6rem 1rem;
  border-radius: 12px;
  max-width: 80%;
  word-wrap: break-word;
  line-height: 1.5;
  box-shadow: 0 1px 1px rgba(0,0,0,0.1);
}
.message-bubble.system { background-color: #2c3e50; color: #bdc3c7; font-style: italic; font-size: 0.85rem; }
.message-bubble.cliente { background-color: var(--client-bubble); border-bottom-left-radius: 4px; }
.message-bubble.vendedor { background-color: var(--seller-bubble); color: white; border-bottom-right-radius: 4px; }
.message-bubble p { margin: 0; }
.message-bubble audio { border-radius: 20px; }

.chat-input-area {
  padding: 0.75rem 1rem;
  background-color: var(--surface-dark-1);
  flex-shrink: 0;
}
.customer-query-area {
  border-bottom: 1px solid var(--border-color);
}
.seller-input { border-top: 1px solid var(--border-color); }

.chat-form { display: flex; align-items: center; gap: 0.5rem; }
.chat-form input {
  flex-grow: 1;
  padding: 0.75rem 1rem;
  border-radius: 20px;
  border: 1px solid var(--border-color);
  background-color: var(--surface-dark-2);
  color: var(--text-light);
  font-size: 0.95rem;
  outline: none;
}

.icon-button { background: none !important; border: none; color: var(--text-secondary); cursor: pointer; padding: 0.5rem; width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; }
.ai-button {
  background-color: var(--primary-blue) !important;
  border: none;
  color: white;
  cursor: pointer;
  width: 45px;
  height: 45px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background-color 0.2s;
  flex-shrink: 0;
}
.ai-button:disabled { background-color: #555 !important; cursor: not-allowed; }


/* ==============================================
   COMPONENTES DO COPILOTO (COLUNA 3)
   ============================================== */
.copilot-header { text-align: center; margin-bottom: 2rem; flex-shrink: 0; }
.copilot-header h1 {
  margin: 0;
  font-size: 1.8rem;
  /* NOVO: Adiciona um gradiente sutil ao ícone */
  color: #c9d1d9;
}
.copilot-output { display: flex; flex-direction: column; gap: 0; } /* Gap será controlado pelo .suggestion-group */

.suggestion-group {
  border-bottom: 1px solid var(--border-color);
  padding: 1.5rem 0;
}
.suggestion-group:first-child { padding-top: 0; }
.suggestion-group:last-child { border-bottom: none; }

.suggestion-query {
  margin: 0 0 1rem 0;
  padding: 0.75rem 1rem;
  border-left: 4px solid var(--primary-blue);
  background-color: var(--surface-dark-2);
  color: var(--text-secondary);
  font-style: italic;
  border-radius: 0 8px 8px 0;
}

.placeholder-card {
  border: 2px dashed var(--border-color);
  border-radius: 12px;
  padding: 3rem;
  text-align: center;
  color: var(--text-secondary);
  /* NOVO: Adiciona uma transição suave */
  transition: background-color 0.3s ease, border-color 0.3s ease;
  margin-top: 2rem; /* Adiciona um espaço do topo */
}

.placeholder-card:hover {
  background-color: var(--surface-dark-1);
  border-color: var(--primary-blue);
}
.placeholder-card h4 {
  margin: 1rem 0 0.5rem 0;
  font-size: 1.1rem;
  color: var(--text-light);
}
.placeholder-card p {
  margin: 0;
  font-size: 0.9rem;
  max-width: 250px; /* Evita que o texto fique muito largo */
  margin-left: auto;
  margin-right: auto;
}
.response-card { background-color: var(--surface-dark-1); border: 1px solid var(--border-color); padding: 1.5rem; border-radius: 12px; margin-top: 1rem; }
.video-card { margin-top: 1rem; }
.card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
.response-card h3 { margin: 0; color: var(--text-light); display: flex; align-items: center; gap: 0.75rem; font-size: 1.1rem; }
.use-suggestion-btn { background-color: var(--seller-bubble); color: white; border: none; padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer; font-weight: 600; transition: opacity 0.2s; }
.suggestion-card p { font-size: 1.05rem; line-height: 1.6; white-space: pre-wrap; margin: 0; color: #b0bec5; }
.audio-player-wrapper { margin-top: 1.5rem; border-top: 1px solid var(--border-color); padding-top: 1rem; }
audio { width: 100%; height: 40px; }

.player-wrapper { position: relative; padding-top: 56.25%; border-radius: 8px; overflow: hidden; }
.player-wrapper > div, .player-wrapper > video { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
.player-wrapper video.copilot-video-player { object-fit: cover; background-color: #000; }
.video-instruction { background-color: var(--surface-dark-2); padding: 0.5rem 1rem; border-radius: 6px; font-size: 0.9rem; color: var(--text-secondary); text-align: center; margin-top: 1rem; }
.error-message { text-align: center; padding: 1rem; background-color: rgba(248, 81, 73, 0.1); border: 1px solid var(--error-red); color: var(--error-red); border-radius: 8px; }

.generate-audio-btn {
  background-color: transparent;
  color: var(--primary-blue);
  border: 1px solid var(--primary-blue);
  padding: 0.5rem 1rem;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.2s;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  margin-top: 0.5rem;
}
.generate-audio-btn:hover { background-color: var(--primary-blue); color: white; }
.generate-audio-btn:disabled { opacity: 0.5; cursor: not-allowed; }

.audio-controls { display: flex; align-items: center; gap: 1rem; width: 100%; }
.audio-controls audio { flex-grow: 1; }
.audio-controls .audio-send-btn { flex-shrink: 0; }


/* ==============================================
   ANIMAÇÕES
   ============================================== */
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
/* Estilos para o card de link do YouTube */
.youtube-link-card {
  display: block;
  position: relative;
  width: 100%;
  padding-top: 56.25%; /* Proporção 16:9 */
  border-radius: 8px;
  overflow: hidden;
  text-decoration: none;
  color: white;
  text-align: center;
}

.youtube-link-card img {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.youtube-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.6); /* Fundo semi-transparente */
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  font-weight: bold;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.youtube-link-card:hover .youtube-overlay {
  opacity: 1; /* Mostra o overlay ao passar o mouse */
}
/* Estilos para o player de vídeo do YouTube dentro do chat */
.youtube-player-in-chat {
  position: relative;
  width: 300px; /* Largura fixa para o player no chat */
  height: 170px; /* Proporção 16:9 (300 / 16 * 9 = 168.75) */
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 5px rgba(0,0,0,0.3);
  background-color: black;
}
.youtube-player-in-chat > div { /* Target the inner ReactPlayer div */
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}
.message-bubble.video-bubble {
  padding: 0;
  background-color: transparent;
  box-shadow: none;
}
/* ==============================================
   ESTILOS PARA O SELETOR DE TOM
   ============================================== */
.tone-selector {
  margin-top: 1.5rem;
  border-top: 1px solid var(--border-color);
  padding-top: 1rem;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 0.9rem;
}

.tone-selector span {
  color: var(--text-secondary);
  font-weight: 600;
}

.tone-selector label {
  display: inline-flex;
  align-items: center;
  cursor: pointer;
  background-color: var(--surface-dark-2);
  padding: 0.4rem 0.8rem;
  border-radius: 15px;
  border: 1px solid var(--border-color);
  transition: all 0.2s;
  text-transform: capitalize;
}

.tone-selector input[type="radio"] {
  display: none; /* Esconde o botão de rádio padrão */
}

.tone-selector input[type="radio"]:checked + label,
.tone-selector label:hover {
  background-color: var(--primary-blue);
  color: white;
  border-color: var(--primary-blue);
}
/* Adiciona um cursor de "agarrar" ao passar o mouse sobre mensagens do cliente */
.draggable-message:hover {
  cursor: grab;
}
.draggable-message:active {
  cursor: grabbing;
}

.clear-suggestions-btn {
  background-color: transparent;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.4rem;
  font-size: 0.85rem;
  padding: 0.5rem;
  border-radius: 6px;
  transition: all 0.2s ease;
}

.clear-suggestions-btn:hover {
  background-color: var(--surface-dark-1);
  color: var(--text-light);
}

/* --- Estilos para a Nova Área de Interação --- */

/* Wrapper que posiciona a área de interação no rodapé */
.interaction-area-container {
  flex-shrink: 0;
  /*margin-top: auto*/
  padding-bottom: 1rem;
  border-bottom: 1px solid var(--border-color);
}

.interaction-area {
  padding: 1rem;
  text-align: center;
  transition: all 0.3s ease;
}

/* Formulário de pergunta do vendedor */
.private-query-form {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
}

.private-query-form input {
  flex-grow: 1;
  padding: 0.75rem 1rem;
  border-radius: 8px;
  border: 1px solid var(--border-color);
  background-color: var(--surface-dark-1);
  color: var(--text-light);
  font-size: 0.9rem;
}

.private-query-form button {
  background-color: var(--primary-blue);
  border: none;
  color: white;
  padding: 0 1.5rem;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
}

/* Instrução de arrastar e soltar */
.drag-drop-prompt {
  border: 2px dashed var(--border-color);
  border-radius: 12px;
  padding: 2.5rem 1rem;
  transition: background-color 0.3s, border-color 0.3s;
  cursor: pointer;
}
.drag-drop-prompt:hover {
  border-color: var(--primary-blue);
  background-color: var(--surface-dark-1);
}
.drag-drop-prompt svg {
  stroke: var(--text-secondary);
  width: 32px;
  height: 32px;
  margin-bottom: 0.5rem;
}
.drag-drop-prompt p {
  color: var(--text-secondary);
  font-size: 0.9rem;
  margin: 0;
}

/* --- VERSÃO COMPACTA --- */
.interaction-area.compact .private-query-form {
  margin-bottom: 1rem;
}
.interaction-area.compact .drag-drop-prompt {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.75rem 1rem;
  border-style: solid;
  cursor: default;
}
.interaction-area.compact .drag-drop-prompt:hover {
  background-color: transparent; /* Desativa o hover na versão compacta */
  border-color: var(--border-color);
}
.interaction-area.compact .drag-drop-prompt svg {
  width: 24px;
  height: 24px;
  margin-bottom: 0;
  flex-shrink: 0;
}
.suggestion-delete-btn {
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 0.5rem;
  border-radius: 50%;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.suggestion-delete-btn:hover {
  background-color: var(--surface-dark-1);
  color: var(--text-light);
}

/* ==============================================
   ESTILOS PARA A ANIMAÇÃO DE CARREGAMENTO
   ============================================== */

.loading-animation-card {
  display: flex;
  flex-direction: row; /* Alinha o ícone e o texto horizontalmente */
  align-items: center;
  justify-content: center;
  gap: 1rem;
  padding: 3rem;
  margin-top: 2rem;
  color: var(--text-secondary);
}

.loading-spinner-icon {
  animation: spin 1.5s linear infinite;
}

.fade-in-text {
  animation: fadeIn 0.5s ease-in-out;
  font-size: 0.9rem;
}

/* Animação de Rotação para o Ícone */
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* Animação de Fade-in para o Texto */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.message-bubble.cliente {
  background-color: var(--client-bubble);
  border-bottom-left-radius: 4px; /* Canto mais reto */
}
.message-bubble.vendedor {
  background-color: var(--seller-bubble);
  color: white;
  border-bottom-right-radius: 4px; /* Canto mais reto */
}

.conversation-item:hover {
  background-color: #202c33; /* Cor de hover do WhatsApp */
}
.conversation-item.active {
  background-color: #2a3942; /* Cor de item ativo do WhatsApp */
}
/* Em frontend/src/index.css */

/* =============================================
   ESTILOS PARA O CABEÇALHO E PESQUISA DA LISTA
   ============================================== */

.conversation-list-header {
  padding: 1rem 1rem 0.5rem 1rem;
  background-color: var(--surface-dark-1);
  border-bottom: 1px solid var(--border-color);
}

.conversation-list-header h2 {
  margin: 0;
  font-size: 1.5rem;
  color: var(--text-light);
}

.search-bar {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.5rem 1rem;
  background-color: var(--surface-dark-1);
  border-bottom: 1px solid var(--border-color);
}

.search-bar svg {
  color: var(--text-secondary);
}

.search-bar input {
  width: 100%;
  padding: 0.5rem;
  background-color: var(--surface-dark-2);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  color: var(--text-light);
  font-size: 0.9rem;
}

.search-bar input::placeholder {
  color: var(--text-secondary);
}

.search-bar input:focus {
  outline: none;
  border-color: var(--primary-blue);
}

/* Em frontend/src/index.css */

/* Estilo para o botão de Nova Conversa */
.conversation-list-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.new-chat-btn {
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 0.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}
.new-chat-btn:hover {
  background-color: var(--surface-dark-2);
  color: var(--text-light);
}

/* Estilos para o Modal */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal-content {
  background-color: var(--surface-dark-1);
  padding: 2rem;
  border-radius: 12px;
  width: 90%;
  max-width: 500px;
  border: 1px solid var(--border-color);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
}

.modal-content h2 {
  margin-top: 0;
}

.modal-content p {
  color: var(--text-secondary);
  font-size: 0.9rem;
  margin-bottom: 1.5rem;
}

.modal-content form {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.modal-content input,
.modal-content textarea {
  padding: 0.75rem 1rem;
  border-radius: 8px;
  border: 1px solid var(--border-color);
  background-color: var(--surface-dark-2);
  color: var(--text-light);
  font-size: 1rem;
  font-family: var(--font-family);
}

.modal-content textarea {
  resize: vertical;
}

.modal-actions {
  display: flex;
  justify-content: flex-end;
  gap: 1rem;
  margin-top: 1.5rem;
}

.modal-actions button {
  padding: 0.6rem 1.2rem;
  border-radius: 8px;
  border: none;
  font-weight: 600;
  cursor: pointer;
}

.btn-secondary {
  background-color: var(--surface-dark-2);
  color: var(--text-light);
}
.btn-secondary:hover {
  background-color: #313840;
}

.btn-primary {
  background-color: var(--seller-bubble);
  color: white;
}
.btn-primary:hover {
  opacity: 0.9;
}

.btn-primary:disabled, .btn-secondary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Em frontend/src/index.css */

/* ==============================================
   TELA DE BOAS-VINDAS (CHAT INATIVO)
   ============================================== */

.welcome-panel {
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  height: 100%;
  padding: 2rem;
}

.welcome-content {
  color: var(--text-secondary);
  max-width: 400px;
}

.welcome-content h2 {
  color: var(--text-light);
  font-size: 1.8rem;
  margin-top: 0;
  margin-bottom: 0.75rem;
}

.welcome-content p {
  font-size: 1rem;
  line-height: 1.6;
}

/* Aplica a imagem de fundo ao histórico de chat E à tela de boas-vindas */
.chat-history-active,
.welcome-panel {
  background-image: url('https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png');
  background-repeat: repeat;
}

/* Ajusta a opacidade da imagem para não brigar com o texto */
.welcome-panel {
  background-blend-mode: overlay;
  background-color: rgba(11, 20, 26, 0.95); /* Cor de fundo escura com leve transparência */
}

.chat-history-active {
    background-blend-mode: soft-light;
    background-color: rgba(11, 20, 26, 0.85);
}
/* Em frontend/src/index.css */

.preview-info {
  font-size: 0.9rem;
  color: var(--text-secondary);
  text-align: center;
  padding: 0.5rem;
}
.preview-info.error {
  color: var(--error-red);
}
.contact-preview {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1rem;
  background-color: var(--surface-dark-2);
  border-radius: 8px;
}
.contact-preview img {
  width: 40px;
  height: 40px;
  border-radius: 50%;
}
.contact-preview span {
  font-weight: 600;
}

/* Em frontend/src/index.css */

/* ==============================================
   ESTILOS PARA O HORÁRIO DA MENSAGEM
   ============================================== */

.message-bubble {
  /* Adicionamos display flex para controlar o alinhamento interno */
  display: inline-flex;
  flex-direction: column;
  align-items: flex-start; /* Alinha o texto principal à esquerda */
}

.message-bubble p {
  margin-bottom: 4px; /* Adiciona um pequeno espaço entre o texto e o horário */
}

.message-metadata {
  align-self: flex-end; /* Empurra o horário para a direita */
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.message-timestamp {
  font-size: 0.75rem; /* Tamanho pequeno */
  color: var(--text-secondary);
  opacity: 0.8;
}

/* Cor do horário no balão do vendedor para melhor contraste */
.message-bubble.vendedor .message-timestamp {
  color: #aebac1;
}