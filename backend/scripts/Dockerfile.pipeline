FROM python:3.11-slim
WORKDIR /app

# Instala o Git
RUN apt-get update && \
    apt-get install -y git && \
    rm -rf /var/lib/apt/lists/*

# Copia o requirements.txt DE DENTRO DA PASTA scripts/ no contexto
COPY scripts/requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# --- AJUSTES NOS CAMINHOS DE CÃ“PIA ---
# Copia o script DE DENTRO DA PASTA scripts/ no contexto para a raiz /app
COPY scripts/gerenciar_pipeline.py .

# Copia core/, data/, youtube_links.txt DA RAIZ DO CONTEXTO (backend/)
COPY core/ /app/core/
COPY scripts/data/ /app/data/
COPY scripts/youtube_links.txt .

# O CMD continua o mesmo, pois o script foi copiado para /app
CMD ["python", "gerenciar_pipeline.py"]